package br.com.BaseTestes;

import java.io.BufferedReader;
import java.io.DataOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;

import javax.net.ssl.HttpsURLConnection;

import org.apache.commons.codec.Charsets;
import org.apache.http.Header;
import org.apache.http.HttpEntity;
import org.apache.http.HttpRequest;
import org.apache.http.HttpResponse;
import org.apache.http.client.methods.CloseableHttpResponse;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.CloseableHttpClient;
import org.apache.http.impl.client.HttpClientBuilder;
import org.apache.http.impl.client.HttpClients;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import org.omg.CORBA.portable.OutputStream;
import org.openqa.selenium.remote.http.HttpClient;

import sun.misc.IOUtils;
import sun.net.ftp.impl.DefaultFtpClientProvider;
import sun.nio.ch.IOUtil;

public class CarregaConexaoWeb {
	

		String dataa = "";
		int tmp, i;
		String resposta;
		
		
		String [] filmearray;
		
		
		// HTTP GET request
		public String sendGet() throws Exception {
			
			 //URL url = new URL("https://branchh.tech/app_Feira.php");
			//String urlParams = "usuario=" + db_usuario;
			
			//String urlParams = "data=" + db_data;
			
			
			/*HttpURLConnection httpURLConnection = (HttpURLConnection) url.openConnection();
			//httpURLConnection.setDoOutput(true);
			  
			  
			  
			//java.io.OutputStream os = httpURLConnection.getOutputStream();
            //os.write(urlParams.getBytes());
            //os.close();
            InputStream is = httpURLConnection.getInputStream();
            while ((tmp = is.read()) != -1) {
                dataa += (char) tmp;
            }
            is.close();
            httpURLConnection.disconnect();	
            return dataa;*/
			try{
			
				
			String url = "https://swapi.co/api/films/";
			CloseableHttpClient cliente = HttpClientBuilder.create().build();
			HttpGet httpGet = new HttpGet(url);
			HttpResponse response= cliente.execute(httpGet);
			
						
			try {
                JSONObject objJSON = new JSONObject(response.toString());
                
                System.out.println(response.toString());

                JSONArray arrayListitulos = objJSON.getJSONArray("'name'");

                /*filmearray = new String[arrayListitulos.length()];
                
                for (i = 0; i < arrayListitulos.length(); i++) {

                
                  System.out.println(filmearray[i] = arrayListitulos.getJSONObject(i).getString("title"));
                 
                  //resposta=filmearray[i];
                }*/
	
			}catch (JSONException e) {
                e.printStackTrace();
                e.getStackTrace();
            }
               
			
		
		 /*protected void onPostExecute(final String result) {


	            try {
	                JSONObject objJSON = new JSONObject(result);

	                JSONArray arrayListitulos = objJSON.getJSONArray("results");

	                filmearray = new String[arrayListitulos.length()];
	             

	                for (i = 0; i < arrayListitulos.length(); i++) {

	                    
	                    System.out.println(filmearray[i] = arrayListitulos.getJSONObject(i).getString("Feira"));
	                 
	                }

	            } catch (JSONException e) {
	                e.printStackTrace();
	            }

	            if (result.equals("")) {

	            }

	        }*/
	  
	
}catch(Exception e){}
			
			
			return  resposta;
			
     }
		
}
		
    
